<div class="container contEv">
  <div class="headingEvent">
    <h2 class="page-header">
      Mes Evenements</h2>
  </div>
  <div>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs container col-md-12" role="tablist">
      <li role="presentation" class="active" style="cursor: pointer">
        <a data-target="#home" aria-controls="home" role="tab" data-toggle="tab">J'organise
          <span class="badge" style="margin-left:10px;" ng-show="nbEvents != 0">{{nbEvents}}</span>
        </a>
      </li>
      <li role="presentation" style="cursor: pointer">
        <a data-target="#profile" aria-controls="profile" role="tab" data-toggle="tab">Invitations
          <span class="badge" style="margin-left:10px;" ng-show="nbInvit != 0">{{nbInvit}}</span>
        </a>
      </li>
      <a href="#/createEvent" class="btn btn-success pull-right" role="button">
        <span class="glyphicon glyphicon-plus"></span>
        Créer
      </a>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
      <!-- ========================== TAB EVENTS ===================== -->
      <div role="tabpanel" class="tab-pane active" id="home">
        <div class="container col-md-12" style="margin-top:20px;">
          <div class="panel-group" id="accordion">

            <div class="panel panel-default" ng-repeat="event in events  | filter : {userId: userId} | orderBy: 'crEdateForm'">
              <div class="panel-heading" ng-click="geocodeAddress(event)" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{$index}}" style="cursor: pointer">
                <h3 class="panel-title" style="font-size: 1.5em;">

                  {{event.crEnameForm}}
                  <span style="float: right; font-weight:bold;">{{formatDate(event.crEdateForm)}}</span>
                  <span data-toggle="modal" data-target="#myModal" class="fa fa-trash-o pull-right" style="margin-right: 2%"></span>
                </h3>
              </div>
              <div id="collapse{{$index}}" class="panel-collapse collapse">
                <div class="panel-body">
                  <div class="row">
                    <div class="col-md-6">
                      <h4>Adresse évènements</h4>
                      <p>n°
                        {{event.crEnumberForm}}
                        rue
                        {{event.crEwayForm}}</p>
                      <p>{{event.crEpostalcodeForm}}
                        {{event.crEcityForm}}</p>
                    </div>
                    <div class="col-md-12">
                      <h4>Liste des invités</h4>
                      <div class="" ng-repeat="amis in event.tabFriendEvent">
                        <div class="col-md-3">
                          <div class="card padding" ng-click="friendhistory(amis)">
                            <img class="imageProfileSmall center-block" src="{{info(amis,'image')}}" alt=""/>
                            <div class="RecetteTitle">{{info(amis,'prenom')}}</div>
                            <div class="RecetteTitle">
                              {{info(amis,'nom')}}</div>
                            <div class="row">
                              <div class="RecetteDescription"></div>
                              <div class="RecettePreparation"></div>
                              <div class="RecetteCuisson"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Modal -->
              <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                      <h4 class="modal-title" id="myModalLabel">Attention</h4>
                    </div>
                    <div class="modal-body">
                      <p class="text-center">Voulez vous vraiment supprimer votre événement ?</p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                      <a href="#/menu">
                        <button type="button" class="btn btn-primary" ng-click="delete(event._id)" data-dismiss="modal">Valider</button>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ========================== TAB INVITATIONS =================================== -->
      <div role="tabpanel" class="tab-pane" id="profile">
        <div class="container col-md-12" style="margin-top:20px;">
          <div class="panel-group" id="accordionInvit">
            <div class="panel panel-default" ng-repeat="event in invitEvents">
              <div class="panel-heading" ng-click="geocodeAddress('hhjfd')" data-toggle="collapse" data-parent="#accordionInvit" data-target="#collapseInvit{{$index}}" style="cursor: pointer">
                <h4 class="panel-title">
                  <p>{{event.crEnameForm}}
                    <span style="float: right; font-weight:bold;">{{formatDate(event.crEdateForm)}}</span>
                  </p>
                </h4>
              </div>
              <div id="collapseInvit{{$index}}" class="panel-collapse collapse">
                <div class="panel-body">
                  <div class="row">
                    <div class="col-md-6">
                      <h4>Adresse évènements</h4>
                      <p>n°
                        {{event.crEnumberForm}}
                        rue
                        {{event.crEwayForm}}</p>
                      <p>{{event.crEpostalcodeForm}}
                        {{event.crEcityForm}}</p>
                    </div>
                    <div class="col-md-12">
                      <h4>Liste des invités</h4>
                      <div class="" ng-repeat="amis in event.tabFriendEvent">
                        <div class="col-md-3">
                          <div class="card padding" ng-click="friendhistory(amis)">
                            <img class="imageProfileSmall center-block" src="{{infoInvit(amis,'image')}}" alt=""/>
                            <div class="RecetteTitle">{{infoInvit(amis,'prenom')}}</div>
                            <div class="RecetteTitle">
                              {{infoInvit(amis,'nom')}}</div>
                            <div class="row">
                              <div class="RecetteDescription"></div>
                              <div class="RecettePreparation"></div>
                              <div class="RecetteCuisson"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <ng-map center="{{position}}" zoom="17" style="heigth:200px">
      <marker position="{{position}}" title=""></marker>
    </ng-map>
  </div>
</div>
